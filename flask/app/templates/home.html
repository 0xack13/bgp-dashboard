{% extends "layout.html" %}
{% block content %}
          <!-- top tiles -->
          <div class="row tile_count">
              <div class="animated flipInY col-md-2 col-sm-4 col-xs-4 tile_stats_count">
                  <div class="left"></div>
                  <div class="right">
                      <span class="count_top">Autonomous Systems</span>
                      <div class="count">{{ num_peers }}</div>
                  </div>
              </div>
            </div>
                <canvas id="myChart" width="400" height="400"></canvas>
                <script src="//cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>
                <script type="text/javascript">
                var count;
                
                $.getJSON('bgp/api/v1.0/peers', function(peers) {
                  count = Object.keys(peers.peers).length
                  console.log(count)
                });
                var ctx = document.getElementById("myChart").getContext("2d");
                var data = {
                    labels: ["IBM", "Microsoft"],
                    datasets: [{
                        label: "Product A",
                        fillColor: "rgba(220,220,220,0.5)",
                        strokeColor: "rgba(220,220,220,0.8)",

                        data: [25, 75]
                    }, {
                        label: "Product B",
                        fillColor: "rgba(151,187,205,0.5)",
                        strokeColor: "rgba(151,187,205,0.8)",

                        data: [75, 25]
                    }]

                }
                var myBarChart = new Chart(ctx).Bar(data);
                
                setInterval(function(){
                  $.getJSON('bgp/api/v1.0/peers', function(peers) {
                    count = Object.keys(peers.peers).length
                    console.log(count)
                  });
                  myBarChart.addData([count + 100, count], "Google");
                },1000);
                
                </script>
{% endblock %}
